(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{264:function(e,t,n){e.exports=n(690)},273:function(e,t,n){},275:function(e,t,n){},277:function(e,t,n){},423:function(e,t,n){},425:function(e,t,n){},427:function(e,t,n){},440:function(e,t,n){},442:function(e,t,n){},469:function(e,t){},472:function(e,t,n){},474:function(e,t,n){},624:function(e,t,n){},626:function(e,t,n){},628:function(e,t,n){},630:function(e,t,n){},657:function(e,t,n){},659:function(e,t,n){},661:function(e,t,n){},663:function(e,t,n){},665:function(e,t,n){},667:function(e,t,n){},686:function(e,t,n){},688:function(e,t,n){},690:function(e,t,n){"use strict";n.r(t);var a,r,o,i,c,u=n(0),l=n.n(u),s=n(15),m=n.n(s),d=n(10),v=(n(273),n(31)),p=n(32),f=n(34),b=n(33),h=n(35),E=(n(275),n(12)),y=(n(277),function(){return l.a.createElement(E.MenuItem,null,"Currently No Users")}),g=function(){return l.a.createElement("i",{className:"user-icon fas fa-user"})},N=Object(d.b)(function(e){return{username:e.user.username,users:e.lobby.users}})(function(e){var t=e.users,n=e.username,a=t.map(function(e,t){return l.a.createElement(E.MenuItem,{key:t},l.a.createElement(g,null),l.a.createElement("span",{className:"username-list-item"},e.username,n===e.username&&" (You)"))});return l.a.createElement(E.Navbar,{inverse:!0,collapseOnSelect:!0},l.a.createElement(E.Navbar.Header,null,l.a.createElement(E.Navbar.Brand,null,"Online Jukebox"),l.a.createElement(E.Navbar.Toggle,null)),l.a.createElement(E.Navbar.Collapse,null,l.a.createElement(E.Nav,{pullRight:!0},l.a.createElement(E.NavDropdown,{title:"Users",id:"Users-Nav-Dropdown"},t.length>0?a:l.a.createElement(y,null)))))}),O=N,j=n(8),S=n(263),I=function(e){for(var t=Object.entries(e),n=0;n<t.length;n++){var a=t[n],r=Object(S.a)(a,2),o=r[0],i=r[1].isLoading;if(i)return{isLoading:i,requestName:o}}return{isLoading:!1,requestName:""}},T=(n(423),a={},Object(j.a)(a,"initLobby","Plugging you in ..."),Object(j.a)(a,"searchVideo","Searching ..."),Object(j.a)(a,"addVideoToPlaylist","Adding video to queue ..."),a),w=Object(d.b)(function(e){var t=e.requests.loadingRequests,n=I(t);return{isLoading:n.isLoading,requestName:n.requestName}})(function(e){var t=e.isLoading,n=e.requestName,a=t?"full-page-spinner-container":"full-page-spinner-inactive";return l.a.createElement("div",{className:a},l.a.createElement("div",{className:"full-page-spinner"}),l.a.createElement("div",{className:"full-page-spinner-label"}," ",T[n]," "))}),C=(n(425),n(427),Object(d.b)(function(e){return{username:e.user.username}})(function(e){var t=e.username;return l.a.createElement("header",{className:"application-header"},l.a.createElement("h3",{className:"welcome-heading"},"Welcome, ",l.a.createElement("span",{className:"username-field"}," ",t," ")))})),k=n(18),L=n(252),D={server:{SERVER_BASE_ENDPOINT:"http://localhost:5000"},api:{autocomplete:{BASE_URL:"https://suggestqueries.google.com/complete/search"}},environment:{debug:!1}},R=(n(440),function(){return l.a.createElement("div",{className:"no-video-backdrop"},l.a.createElement("h4",{className:"no-video-backdrop-title"}," Jukebox Paused "))}),P=(n(442),n(255)),V=n.n(P)()(D.server.SERVER_BASE_ENDPOINT),q="loadingData",U="loadingSuccess",_="loadingFailure",A=function(e){return{type:q,requestName:e}},B=function(e){return{type:U,requestName:e}},F="updateCurrentVideo",x="updatePlaylist",M=function(e){!function(e,t){V.emit("PLAY_NEXT_VIDEO",{videoId:e,defaultSkip:t})}(e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1])},Y=function(){return function(e){V.emit("FETCH_PLAYLIST"),V.on("UPDATE_PLAYLIST",function(t){var n=t.videos,a=function(e){return e.length>0?e[0]:{videoTitle:"",videoId:"",suggestedUser:"",videoDuration:""}}(n);e(function(e){return{type:x,currentPlaylist:e}}(n)),e(function(e){return{type:F,video:e}}(a)),e(B("initLobby"))})}},W=function(e){return function(t){t(A("addVideoToPlaylist")),function(e){V.emit("ADD_TO_PLAYLIST",e)}(e),t(B("addVideoToPlaylist"))}},G="updateVolume",J="updateLobbyUsers",K="mountPlayer",z=function(e){function t(e){var n;return Object(v.a)(this,t),(n=Object(f.a)(this,Object(b.a)(t).call(this,e))).state={player:null},n._onReady=n._onReady.bind(Object(k.a)(Object(k.a)(n))),n._onStateChange=n._onStateChange.bind(Object(k.a)(Object(k.a)(n))),n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"_onReady",value:function(e){var t=e.target;this.setState({player:t}),this.props.mountPlayer(t),window.player=e.target,t.mute(),t.playVideo()}},{key:"_onStateChange",value:function(e){0===e.data&&M(this.props.currentVideoId,!1)}},{key:"render",value:function(){var e=this.props.currentVideoId,t=D.environment.debug?"youtube-player-debug":"youtube-player",n={height:"270",width:"420",playerVars:D.environment.debug?{autoplay:1}:{autoplay:1,controls:0,showinfo:0}};return l.a.createElement("div",{className:"youtube-player-wrapper"},""===e&&l.a.createElement(R,null),l.a.createElement(L.a,{className:t,videoId:e,opts:n,onReady:this._onReady,onStateChange:this._onStateChange}))}}]),t}(l.a.Component),H=Object(d.b)(function(e){return{currentVideoId:e.video.videoId}},function(e){return{mountPlayer:function(t){e(function(e){return{type:K,player:e}}(t))}}})(z),Q=(n(472),function(){return l.a.createElement("div",{className:"empty-video-background"},l.a.createElement("i",{className:"pause-icon far fa-pause-circle"}),l.a.createElement("h4",{className:"no-video-text"},"Currently no videos on the queue"))}),X=Object(d.b)(function(e){return{playlist:e.playlist.currentPlaylist}})(function(e){var t=e.playlist,n=t.map(function(e,t){return l.a.createElement(u.Fragment,{key:t},l.a.createElement("li",{className:"playlist-item",key:t},l.a.createElement("i",{className:"music-icon fas fa-music"}),e.videoTitle),l.a.createElement("hr",{className:"seperator"}))});return l.a.createElement("div",{className:"playlist-section"},l.a.createElement("h4",{className:"playlist-header"}," Current Playlist"),l.a.createElement("hr",{className:"seperator"}),l.a.createElement("ul",{className:"video-playlist"},t.length>0?n:l.a.createElement(Q,null)))}),$=n(143),Z=n.n($),ee=n(66),te=n.n(ee),ne=(n(474),n(256)),ae=(n(624),n(626),function(e){var t=e.videoTitle,n=e.channelTitle,a=e.videoDuration;return l.a.createElement("div",{className:"suggestion-description"},l.a.createElement("h3",{className:"suggestion-title"},t),l.a.createElement("div",{className:"video-channel"},n),l.a.createElement("div",{className:"video-duration"},a))}),re=Object(d.b)(null,function(e){return{addVideoToQueue:function(t,n,a){e(W(t))}}})(function(e){var t=e.video,n=e.addVideoToQueue,a=t.videoId,r=t.thumbnail,o=t.title,i=t.channelTitle,c=t.duration;return l.a.createElement(u.Fragment,null,l.a.createElement("li",{className:"suggestion-list-item",key:a},l.a.createElement("div",null,l.a.createElement("img",{alt:"video-thumbnail",className:"suggestion-thumbnail",src:r})),l.a.createElement(ae,{videoTitle:o,channelTitle:i,videoDuration:c}),l.a.createElement(E.Button,{className:"add-video-button",bsStyle:"primary",onClick:function(){return n(t)}},l.a.createElement("i",{className:"fas fa-plus plus-icon"}))),l.a.createElement("hr",{className:"video-suggestion-seperator"}))}),oe=(n(628),function(e){var t=e.videos.map(function(e){return l.a.createElement(re,{key:e.videoId,video:e})});return l.a.createElement("ul",{className:"video-suggestion-list"},t)}),ie=(n(630),function(){return l.a.createElement("i",{className:"fas fa-headphones-alt empty-tab-placeholder-icon"})}),ce=function(){return l.a.createElement("div",{className:"empty-tab-container"},l.a.createElement(ie,null),l.a.createElement("h4",{className:"empty-tab-prompt-prefix"}," Search for your favorite songs "),l.a.createElement("h5",{className:"empty-tab-prompt-suffix"}," Let's get this party started! "))},ue=n(257),le=n.n(ue),se="searchVideos/FAILURE",me="searchVideos/SUCCESS",de=function(e){return function(t){var n="".concat(D.server.SERVER_BASE_ENDPOINT,"/videos?query=").concat(e);t(A("searchVideo")),le.a.get(n).then(function(e){var n=e.data;t(B("searchVideo")),t({type:me,videos:n})}).catch(function(e){t({type:_,requestName:"searchVideo"}),t({type:se})})}},ve=n(145),pe=n.n(ve),fe=n(258),be=n(259),he=n.n(be),Ee="autocomplete/FAILURE",ye="autocomplete/SUCCESS",ge="autocomplete/LOADING",Ne="autocomplete/LOADING_COMPLETE",Oe=function(e){return new Promise(function(t,n){var a="".concat(D.api.autocomplete.BASE_URL,"?client=youtube&ds=yt&q=").concat(e);he()(a,function(e,a){e?n(new Error("Error in retreiving autocomplete suggestions")):t(a[1].map(function(e){return{name:e[0]}}))})})},je=(n(655),n(657),function(e){function t(e){var n;return Object(v.a)(this,t),(n=Object(f.a)(this,Object(b.a)(t).call(this,e))).handleInputChange=function(e){n.setState({query:e}),n.props.updateSuggestions(e)},n.handleTypeaheadChange=function(e){if(e[0]){var t=e[0].name;n.setState({query:t}),n.props.searchVideos(t)}},n.state={query:""},n.searchBarRef=l.a.createRef(),n.handleInputChange=n.handleInputChange.bind(Object(k.a)(Object(k.a)(n))),n.handleTypeaheadChange=n.handleTypeaheadChange.bind(Object(k.a)(Object(k.a)(n))),n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.state.query,n=this.props,a=n.videos,r=n.isLoading,o=n.multiple,i=n.options;return l.a.createElement("div",{className:"video-search-section"},l.a.createElement("form",{onSubmit:function(n){n.preventDefault(),e.props.searchVideos(t)},ref:this.searchBarRef},l.a.createElement(E.FormGroup,{className:"search-bar-wrapper",controlId:"formBasicText"},l.a.createElement(E.InputGroup,null,l.a.createElement(E.InputGroup.Addon,null,l.a.createElement("i",{className:"fab fa-youtube-square"})),l.a.createElement(ne.AsyncTypeahead,{id:"youtube-autocomplete",allowNew:!1,isLoading:r,multiple:o,options:i,labelKey:"name",onSearch:this.handleInputChange,onChange:this.handleTypeaheadChange,placeholder:"Enter a song name from Youtube ..."})))),l.a.createElement("div",{className:"video-suggestions"},a.length>0?l.a.createElement(oe,{videos:a}):l.a.createElement(ce,null)))}}]),t}(l.a.Component)),Se=Object(d.b)(function(e){var t=e.searchVideos.videos,n=e.autocomplete;return{videos:t,isLoading:n.isLoading,multiple:n.multiple,options:n.options}},function(e){return{searchVideos:function(t){e(de(t))},updateSuggestions:function(t){e(function(e){return function(){var t=Object(fe.a)(pe.a.mark(function t(n){var a;return pe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:ge}),t.prev=1,t.next=4,Oe(e);case 4:a=t.sent,n({type:ye,options:a}),n({type:Ne}),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),n({type:Ee}),n({type:Ne});case 13:case"end":return t.stop()}},t,this,[[1,9]])}));return function(e){return t.apply(this,arguments)}}()}(t))}}})(je),Ie=function(){return l.a.createElement("div",{className:"main-action-tabs"},l.a.createElement(Z.a,{defaultActiveKey:1,id:"action-tabs"},l.a.createElement(te.a,{eventKey:1,title:"Search"},l.a.createElement(Se,null)),l.a.createElement(te.a,{eventKey:2,title:"Users"},l.a.createElement(ce,null)),l.a.createElement(te.a,{eventKey:3,title:"Playlist"},l.a.createElement(ce,null))))},Te=(n(659),n(661),function(e){var t=e.videoTitle,n=e.channelTitle,a=e.suggestedUser;return l.a.createElement("div",{className:"footer-song-info"},l.a.createElement("h3",{className:"footer-video-title"},t),n&&a&&l.a.createElement(u.Fragment,null,l.a.createElement("h4",{className:"footer-video-channel"},n),l.a.createElement("h4",{className:"footer-video-suggested-user"},"Added by: ",a)))}),we=Object(d.b)(function(e){return{videoTitle:e.video.videoTitle,channelTitle:e.video.channelTitle,suggestedUser:e.video.suggestedUser,thumbnail:e.video.thumbnail}})(function(e){var t=e.videoTitle,n=e.channelTitle,a=e.suggestedUser,r=e.thumbnail;return l.a.createElement("section",{className:"footer-current-song"},t&&l.a.createElement(u.Fragment,null,l.a.createElement("img",{alt:"video-thumbnail",className:"footer-video-thumbnail",src:r}),l.a.createElement(Te,{videoTitle:t,channelTitle:n,suggestedUser:a})))}),Ce=n(692),ke=(n(663),function(e){function t(e){var n;return Object(v.a)(this,t),(n=Object(f.a)(this,Object(b.a)(t).call(this,e))).state={currentProgress:0},n.frameRate=500,n.updateProgress=function(){var e=n.props.videoDuration,t=0;window.player&&(t=Math.ceil(window.player.getCurrentTime()/e*100)),n.setState({currentProgress:t})},n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.interval=setInterval(this.updateProgress,this.frameRate)}},{key:"componentDidUpdate",value:function(e){this.props.videoDuration!==e.videoDuration&&(clearInterval(this.interval),this.interval=setInterval(this.updateProgress,this.frameRate))}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){return l.a.createElement(Ce.a,{now:this.state.currentProgress})}}]),t}(l.a.Component)),Le=function(e){var t=e.videoDuration;return l.a.createElement(l.a.Fragment,null,t?l.a.createElement(ke,{videoDuration:t}):l.a.createElement(ke,{videoDuration:100}))},De=(n(665),function(e){return e<10?"0".concat(e):e}),Re=function(e){if(e<60)return"00:".concat(De(e));var t,n,a=Math.floor(e/60),r=e%60;return a>60&&(n=Math.floor(a/60),t=a%60),n?"".concat(n,":").concat(De(t),":").concat(De(r)):"".concat(De(a),":").concat(De(r))},Pe=function(e){function t(e){var n;return Object(v.a)(this,t),(n=Object(f.a)(this,Object(b.a)(t).call(this,e))).state={currentTime:0},n.frameRate=1e3,n.updateCurrentTime=function(){var e=0;window.player&&(e=Math.ceil(window.player.getCurrentTime())),n.setState({currentTime:e})},n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.interval=setInterval(this.updateCurrentTime,this.frameRate)}},{key:"componentDidUpdate",value:function(e){this.props.videoDuration!==e.videoDuration&&(clearInterval(this.interval),this.interval=setInterval(this.updateCurrentTime,this.frameRate))}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this.props.videoDuration;return l.a.createElement("div",{className:"footer-progress-duration"},l.a.createElement("span",null,Re(this.state.currentTime)),l.a.createElement("span",{className:"footer-end-time"},Re(e)))}}]),t}(l.a.Component),Ve=(n(667),function(e){var t=function(e){var t=["seconds","minutes","hours"],n=e.split(":").reverse().map(function(e){return parseInt(e)}),a={};return n.length>0&&n.forEach(function(e,n){a[t[n]]=e}),a}(e),n=t.seconds,a=t.minutes,r=t.hours,o=0;return o+=n||0,o+=a?60*a:0,o+=r?60*r*60:0}),qe=Object(d.b)(function(e){return{videoId:e.video.videoId,videoDuration:Ve(e.video.videoDuration)}})(function(e){var t=e.videoDuration,n=e.videoId;return l.a.createElement("section",{className:"footer-controls"},l.a.createElement("div",{className:"footer-control-buttons"},l.a.createElement(E.Button,{className:"favorite-video-button",bsStyle:"primary",bsSize:"small"},l.a.createElement("i",{className:"far fa-heart heart-icon"})),l.a.createElement(E.Button,{className:"skip-video-button",bsStyle:"primary",bsSize:"small",onClick:function(){return M(n,!0)}},"Skip ",l.a.createElement("i",{className:"skip-icon fas fa-forward"}))),l.a.createElement("div",{className:"footer-progress-bar"},l.a.createElement(Pe,{videoDuration:t}),l.a.createElement(Le,{videoDuration:t})))}),Ue=n(260),_e=n.n(Ue),Ae=(n(684),n(686),Object(d.b)(function(e){return{volume:e.lobby.volume,videoId:e.video.videoId,player:e.lobby.player}},function(e){return{updateVolume:function(t,n){e(function(e,t){return function(n){n({type:G,volume:e}),0!==e?(t.setVolume(e),t.unMute()):t.mute()}}(t,n))}}})(function(e){var t=e.player,n=e.volume,a=e.updateVolume;return l.a.createElement("section",{className:"footer-volume-controls"},0===n?l.a.createElement(E.Button,{className:"mute-button",bsStyle:"primary",bsSize:"small",onClick:function(){a(50,t)}},l.a.createElement("i",{className:"fas fa-volume-mute"})):l.a.createElement(E.Button,{className:"mute-button",bsStyle:"primary",bsSize:"small",onClick:function(){a(0,t)}},l.a.createElement("i",{className:"fas fa-volume-up"})),l.a.createElement(_e.a,{maxValue:100,minValue:0,value:n,onChange:function(e){return a(e,t)}}))})),Be=function(){return l.a.createElement("div",{className:"lobby-footer-wrapper"},l.a.createElement("div",{className:"lobby-footer"},l.a.createElement("section",{className:"lobby-footer-content"},l.a.createElement(we,null),l.a.createElement(qe,null),l.a.createElement(Ae,null))))},Fe=(n(688),Object(d.b)(function(e){return{videoId:e.video.videoId}})(function(e){var t=e.videoId;return l.a.createElement(u.Fragment,null,l.a.createElement(C,null),l.a.createElement("div",{className:"upper-section-container"},l.a.createElement("div",{className:"player-view-container"},l.a.createElement("span",{className:"current-playlist-section"},l.a.createElement(X,null)),l.a.createElement("span",{className:"youtube-player-container"},l.a.createElement(H,null)))),l.a.createElement("div",{className:"lower-section-container"},l.a.createElement(Ie,null)),t&&l.a.createElement(Be,null))})),xe="updateUsername",Me=function(e){return{type:xe,username:e}},Ye=function(e){function t(){return Object(v.a)(this,t),Object(f.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.initLobby()}},{key:"render",value:function(){return l.a.createElement("div",{className:"App"},l.a.createElement(w,null),l.a.createElement(O,null),l.a.createElement(Fe,null))}}]),t}(u.Component),We=Object(d.b)(null,function(e){return{initLobby:function(){e(function(e){var t=localStorage.getItem("username"),n=t?{username:t}:{username:""};V.emit("NEW_USER",n),e(A("initLobby")),V.on("USER_JOINED",function(n){t?e(Me(t)):(e(Me(n.username)),localStorage.setItem("username",n.username))})}),e(function(e){V.emit("FETCH_LOBBY_USERS"),V.on("UPDATE_LOBBY_USERS",function(t){e({type:J,users:t})})}),e(Y())}}})(Ye),Ge=n(262),Je=n(11),Ke=n(38),ze=n(261),He=function(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.hasOwnProperty(a.type)?t[a.type](n,a):n}},Qe=He({error:!1,isLoading:!1,multiple:!1,options:[]},(r={},Object(j.a)(r,Ee,function(e){return Object(Je.a)({},e,{error:!0})}),Object(j.a)(r,ye,function(e,t){var n=t.options;return Object(Je.a)({},e,{error:!1,options:n})}),Object(j.a)(r,ge,function(e){return Object(Je.a)({},e,{isLoading:!0})}),Object(j.a)(r,Ne,function(e){return Object(Je.a)({},e,{isLoading:!1})}),r)),Xe=He({username:""},Object(j.a)({},xe,function(e,t){var n=t.username;return Object(Je.a)({},e,{username:n})})),$e=He({users:[],volume:0,player:null},(o={},Object(j.a)(o,G,function(e,t){var n=t.volume;return Object(Je.a)({},e,{volume:n})}),Object(j.a)(o,J,function(e,t){var n=t.users;return Object(Je.a)({},e,{users:n})}),Object(j.a)(o,K,function(e,t){var n=t.player;return Object(Je.a)({},e,{player:n})}),o)),Ze=He({error:!1,videos:[]},(i={},Object(j.a)(i,se,function(e){return Object(Je.a)({},e,{error:!0})}),Object(j.a)(i,me,function(e,t){var n=t.videos;return Object(Je.a)({},e,{error:!1,videos:n})}),i)),et=He({currentPlaylist:[]},Object(j.a)({},x,function(e,t){var n=t.currentPlaylist;return Object(Je.a)({},e,{currentPlaylist:n})})),tt=He({suggestedUser:"",videoId:"",videoTitle:"",videoDuration:""},Object(j.a)({},F,function(e,t){var n=t.video;return Object(Je.a)({},e,n)})),nt="loading",at="ok",rt="error",ot=He({loadingRequests:{}},(c={},Object(j.a)(c,q,function(e,t){var n=t.requestName;return{loadingRequests:Object(Je.a)({},e.loadingRequests,Object(j.a)({},n,{status:nt,isLoading:!0}))}}),Object(j.a)(c,U,function(e,t){var n=t.requestName;return{loadingRequests:Object(Je.a)({},e.loadingRequests,Object(j.a)({},n,{status:at,isLoading:!1}))}}),Object(j.a)(c,_,function(e,t){var n=t.requestName;return{loadingRequests:Object(Je.a)({},e.loadingRequests,Object(j.a)({},n,{status:rt,isLoading:!1}))}}),c)),it=Object(Ke.c)({autocomplete:Qe,user:Xe,lobby:$e,playlist:et,video:tt,searchVideos:Ze,requests:ot}),ct=Object(Ke.e)(function(e,t){return it(e,t)},Ke.d.apply(void 0,Object(Ge.a)([Object(Ke.a)(ze.a)])));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));m.a.render(l.a.createElement(d.a,{store:ct},l.a.createElement(We,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[264,2,1]]]);
//# sourceMappingURL=main.e66e7778.chunk.js.map