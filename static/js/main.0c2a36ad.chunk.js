(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{167:function(e,t,a){e.exports=a.p+"static/media/logo.6e0933ab.svg"},173:function(e,t,a){e.exports=a(413)},182:function(e,t,a){},184:function(e,t,a){},186:function(e,t,a){},213:function(e,t){},216:function(e,t,a){},384:function(e,t,a){},397:function(e,t,a){},399:function(e,t,a){},401:function(e,t,a){},403:function(e,t,a){},405:function(e,t,a){},407:function(e,t,a){},409:function(e,t,a){},411:function(e,t,a){},413:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(15),l=a.n(i),o=a(19),s=(a(182),a(25)),c=a(26),u=a(29),m=a(27),d=a(28),E=(a(184),a(167)),p=a.n(E),v=(a(186),function(){return r.a.createElement("span",null,"Nothing Playing, Party's Dead")}),f=Object(o.b)(function(e){return{nowPlayingTitle:e.video.videoTitle,username:e.user.username}})(function(e){var t=e.nowPlayingTitle,a=e.username;return r.a.createElement("header",{className:"App-header"},r.a.createElement("img",{src:p.a,className:"App-logo",alt:"logo"}),r.a.createElement("h1",{className:"song-heading"},""!==t?t:r.a.createElement(v,null)),r.a.createElement("h3",{className:"welcome-heading"},"Welcome, ",r.a.createElement("span",{className:"username-field"}," ",a," ")))}),h=a(12),g=a(9),y=a(42),b=a(32),N={initialVideo:{suggestedUser:"",videoId:"",videoTitle:"",videoDuration:""},initialPlaylist:{currentPlaylist:[]},initialUser:{username:""},initialLobby:{users:[],volume:0,loadingData:{type:"",isLoading:!1}}},O="UPDATE_CURRENT_VIDEO",_="UPDATE_PLAYLIST",S="UPDATE_USERNAME",T="UPDATE_USERS",D="UPDATE_VOLUME",I="LOADING_DATA",L="DATA_LOADED_COMPLETE",P=Object(y.b)({video:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N.initialVideo,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(b.a)({},e,t.data);default:return e}},playlist:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N.initialPlaylist,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return Object(b.a)({},e,{currentPlaylist:t.data});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N.initialUser,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return Object(b.a)({},e,{username:t.data});default:return e}},lobby:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N.initialLobby,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return Object(b.a)({},e,{users:t.data});case D:return Object(b.a)({},e,{volume:t.data});case I:case L:return Object(b.a)({},e,{loadingData:t.data});default:return e}}}),A=Object(y.c)(P,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),C=a(168),U={NEW_USER:"NEW_USER",USER_JOINED:"USER_JOINED",FETCH_PLAYLIST:"FETCH_PLAYLIST",UPDATE_PLAYLIST:"UPDATE_PLAYLIST",FETCH_LOBBY_USERS:"FETCH_LOBBY_USERS",UPDATE_LOBBY_USERS:"UPDATE_LOBBY_USERS",PLAY_NEXT_VIDEO:"PLAY_NEXT_VIDEO",ADD_TO_PLAYLIST:"ADD_TO_PLAYLIST"},j={keys:{API_KEY:"AIzaSyDXQUtd40PzAqYAuet9-Ol0LzKrI6ZTDDM",API_BASE_URL:"https://www.googleapis.com/youtube/v3/",SERVER_BASE_ENDPOINT:"https://tranquil-thicket-13222.herokuapp.com"},environment:{debug:!1}},k=function(e){return{type:S,data:e}},w=function(e){return{type:T,data:e}},R=function(e){return{type:I,data:e}},B=function(e){return{type:L,data:e}},Y=function(e){A.dispatch(function(e){return{type:D,data:e}}(e))},V=function(e,t){"calling"===e?A.dispatch(R(t)):"complete"===e&&A.dispatch(B(t))},F=B,H=a.n(C)()(j.keys.SERVER_BASE_ENDPOINT),q=function(){!function(){var e=localStorage.getItem("username"),t=e?{username:e}:{username:""};H.emit(U.NEW_USER,t),V("calling",{type:"CONNECTING_TO_LOBBY",isLoading:!0}),H.on(U.USER_JOINED,function(t){e?A.dispatch(k(e)):(A.dispatch(k(t.username)),localStorage.setItem("username",t.username))})}(),H.emit(U.FETCH_PLAYLIST),H.on(U.UPDATE_PLAYLIST,function(e){var t=e.videos,a=M.getHeadVideoPlaylist(t);A.dispatch(M.updatePlaylist(t)),A.dispatch(M.updateCurrentVideo(a)),V("complete",{type:"CONNECTING_TO_LOBBY",isLoading:!1})}),H.emit(U.FETCH_LOBBY_USERS),H.on(U.UPDATE_LOBBY_USERS,function(e){A.dispatch(w(e))})},x=function(e){H.emit(U.ADD_TO_PLAYLIST,e)},G=function(e,t){H.emit(U.PLAY_NEXT_VIDEO,{videoId:e,defaultSkip:t})},M={addVideoToQueue:function(e,t,a){var n={videoId:e,videoTitle:t,videoDuration:a};V("calling",{type:"ADD_TO_PLAYLIST",isLoading:!0}),x(n)},updateCurrentVideo:function(e){return{type:O,data:e}},updatePlaylist:function(e){return{type:_,data:e}},getHeadVideoPlaylist:function(e){return e.length>0?e[0]:{videoTitle:"",videoId:"",suggestedUser:"",videoDuration:""}},updateQueue:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=A.getState().video.videoId;G(t,e)}},W=(a(216),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleClick=a.handleClick.bind(Object(h.a)(Object(h.a)(a))),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"handleClick",value:function(e,t,a){M.addVideoToQueue(e,t,a)}},{key:"render",value:function(){var e=this,t=this.props.video;return r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"suggestion-list-item",key:t.videoId},r.a.createElement("div",null,r.a.createElement("img",{alt:"video-thumbnail",className:"suggestion-thumbnail",src:t.thumbnail})),r.a.createElement("div",{className:"suggestion-description"},r.a.createElement("h3",{className:"suggestion-title"},r.a.createElement("i",{className:"fas fa-music music-icon"}),t.title),r.a.createElement("div",{className:"video-channel"},r.a.createElement("i",{className:"fab fa-youtube-square youtube-icon"})," ",t.channelTitle),r.a.createElement("div",{className:"video-duration"},r.a.createElement("i",{className:"fas fa-stopwatch stopwatch-icon"})," ",t.duration)),r.a.createElement(g.Button,{className:"add-video-button",bsStyle:"primary",onClick:function(){return e.handleClick(t.videoId,t.title,t.duration)}},r.a.createElement("i",{className:"fas fa-plus plus-icon"}))),r.a.createElement("hr",{className:"video-suggestion-seperator"}))}}]),t}(r.a.Component)),X=function(e){var t=e.videos.map(function(e){return r.a.createElement(W,{key:e.videoId,video:e})});return r.a.createElement("ul",{className:"video-suggestion-list"},t)},z=a(169),J=a.n(z),Q={getVideos:function(e){return new Promise(function(t,a){V("calling",{type:"SEARCHING_YOUTUBE_VIDEO",isLoading:!0}),J.a.get(j.keys.SERVER_BASE_ENDPOINT+"/videos?query="+e).then(function(e){V("complete",{type:"SEARCHING_YOUTUBE_VIDEO",isLoading:!1}),t(e.data)}).catch(function(e){F("complete",{type:"CALL_FAILED_VIDEO_SEARCH",isLoading:!1}),a(e.response)})})}},K=(a(384),function(){return r.a.createElement("i",{className:"fas fa-headphones-alt head-phone-icon"})}),Z=function(){return r.a.createElement("div",{className:"search-video-prompt-container"},r.a.createElement(K,null),r.a.createElement("h4",{className:"search-video-prompt-prefix"}," Search for your favorite songs "),r.a.createElement("h5",{className:"search-video-prompt-suffix"}," Let's get this party started! "))},$=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).getVideos=function(){Q.getVideos(a.state.query).then(function(e){a.setState({results:e})}).catch(function(e){console.log(e)})},a.handleInputChange=function(e){a.setState({query:e.target.value})},a.state={query:"",results:[]},a.handleInputChange=a.handleInputChange.bind(Object(h.a)(Object(h.a)(a))),a.submitForm=a.submitForm.bind(Object(h.a)(Object(h.a)(a))),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"submitForm",value:function(e){e.preventDefault(),this.getVideos()}},{key:"render",value:function(){return r.a.createElement("div",{className:"video-search-section"},r.a.createElement("form",{onSubmit:this.submitForm},r.a.createElement(g.FormGroup,{className:"search-bar-wrapper",controlId:"formBasicText"},r.a.createElement(g.InputGroup,null,r.a.createElement(g.InputGroup.Addon,null,r.a.createElement("i",{className:"fab fa-youtube-square"})),r.a.createElement(g.FormControl,{className:"search-bar",type:"text",value:this.state.query,placeholder:"Enter a song name from Youtube",onChange:this.handleInputChange})))),r.a.createElement("div",{className:"video-suggestions"},this.state.results.length>0?r.a.createElement(X,{videos:this.state.results}):r.a.createElement(Z,null)))}}]),t}(r.a.Component),ee=a(170),te=(a(397),[25,50,75,100]),ae=function(e,t){Y(e),0!==e?(t.setVolume(e),t.unMute()):t.mute()},ne=function(e){var t=e.volume,a=e.player;return r.a.createElement(g.Button,{className:"volume-buttons",bsStyle:"primary",bsSize:"small",onClick:function(){ae(t,a)}},t)},re=Object(o.b)(function(e){return{volume:e.lobby.volume}})(function(e){var t=e.suggestedUser,a=e.player,n=e.volume,i=te.map(function(e,t){return r.a.createElement(ne,{player:a,volume:e,key:t})});return r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",{className:"video-banner-title"},"Added by : ",r.a.createElement("span",{className:"suggested-user"},t)),r.a.createElement("div",{className:"control-buttons"},r.a.createElement(g.Button,{className:"skip-video-button",bsStyle:"primary",bsSize:"small",onClick:function(){return M.updateQueue(!0)}},"Skip ",r.a.createElement("i",{className:"skip-icon fas fa-forward"})),0===n?r.a.createElement(g.Button,{className:"mute-button",bsStyle:"primary",bsSize:"small",onClick:function(){ae(50,a)}},r.a.createElement("i",{className:"fas fa-volume-mute"})):r.a.createElement(g.Button,{className:"mute-button",bsStyle:"primary",bsSize:"small",onClick:function(){ae(0,a)}},r.a.createElement("i",{className:"fas fa-volume-up"})),i))}),ie=(a(399),function(){return r.a.createElement("div",{className:"no-video-backdrop"},r.a.createElement("h4",{className:"no-video-backdrop-title"}," Jukebox Paused "))}),le=(a(401),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={player:null},a._onReady=a._onReady.bind(Object(h.a)(Object(h.a)(a))),a._onChangeVideo=a._onStateChange.bind(Object(h.a)(Object(h.a)(a))),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"_onReady",value:function(e){this.setState({player:e.target}),window.player=e.target,e.target.mute(),e.target.playVideo()}},{key:"_onStateChange",value:function(e){0===e.data&&M.updateQueue(!1)}},{key:"render",value:function(){var e=this.props,t=e.currentVideoId,a=e.suggestedUser,n=j.environment.debug?"Youtube-Player-Debug":"Youtube-Player",i={height:"250",width:"420",playerVars:j.environment.debug?{autoplay:1}:{autoplay:1,controls:0,showinfo:0}};return r.a.createElement("div",{className:"Youtube-Player-Wrapper"},""===t&&r.a.createElement(ie,null),r.a.createElement(ee.a,{className:n,videoId:t,opts:i,onReady:this._onReady,onStateChange:this._onStateChange}),""!==a?r.a.createElement(re,{suggestedUser:a,videoId:t,player:this.state.player}):r.a.createElement("h4",{className:"jukebox-paused-title"},"There are currently no songs in the playlist"))}}]),t}(r.a.Component)),oe=Object(o.b)(function(e){return{currentVideoId:e.video.videoId,suggestedUser:e.video.suggestedUser}})(le),se=a(415),ce=(a(403),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={currentProgress:0},a.updateProgress=function(){var e=a.props.videoDuration,t=0;window.player&&(t=Math.ceil(window.player.getCurrentTime()/e*100)),a.setState({currentProgress:t})},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.interval=setInterval(this.updateProgress,500)}},{key:"componentDidUpdate",value:function(e){this.props.videoDuration!==e.videoDuration&&(clearInterval(this.interval),this.interval=setInterval(this.updateProgress,500))}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){return r.a.createElement(se.a,{now:this.state.currentProgress})}}]),t}(r.a.Component)),ue=function(e){var t=e.videoDuration;return r.a.createElement(r.a.Fragment,null,0!==t&&r.a.createElement(ce,{videoDuration:t}))},me=function(e){var t=function(e){var t=["seconds","minutes","hours"],a=e.split(":").reverse().map(function(e){return parseInt(e)}),n={};return a.length>0&&a.forEach(function(e,a){n[t[a]]=e}),n}(e),a=t.seconds,n=t.minutes,r=t.hours,i=0;return i+=a||0,i+=n?60*n:0,i+=r?60*r*60:0},de=(a(405),function(){return r.a.createElement("div",{className:"empty-video-background"},r.a.createElement("i",{className:"pause-icon far fa-pause-circle"}),r.a.createElement("h4",{className:"no-video-text"},"Currently no videos on the queue"))}),Ee=Object(o.b)(function(e){return{playlist:e.playlist.currentPlaylist,videoDuration:me(e.video.videoDuration)}})(function(e){var t=e.playlist,a=e.videoDuration,n=t.map(function(e,t){return r.a.createElement(r.a.Fragment,{key:t},r.a.createElement("li",{className:"playlist-item",key:t},r.a.createElement("i",{className:"music-icon fas fa-music"}),e.videoTitle),0===t&&r.a.createElement(ue,{videoDuration:a}),r.a.createElement("hr",{className:"seperator"}))});return r.a.createElement("div",{className:"playlist-section"},r.a.createElement("h4",{className:"playlist-header"}," Current Playlist"),r.a.createElement("hr",{className:"seperator"}),r.a.createElement("ul",{className:"video-playlist"},t.length>0?n:r.a.createElement(de,null)))}),pe=(a(407),function(){return r.a.createElement(g.MenuItem,null,"Currently No Users")}),ve=function(){return r.a.createElement("i",{className:"user-icon fas fa-user"})},fe=Object(o.b)(function(e){return{username:e.user.username,users:e.lobby.users}})(function(e){var t=e.users,a=e.username,n=t.map(function(e,t){return r.a.createElement(g.MenuItem,{key:t},r.a.createElement(ve,null),r.a.createElement("span",{className:"username-list-item"},e.username,a===e.username&&" (You)"))});return r.a.createElement(g.Navbar,{inverse:!0,collapseOnSelect:!0},r.a.createElement(g.Navbar.Header,null,r.a.createElement(g.Navbar.Brand,null,"Online Jukebox"),r.a.createElement(g.Navbar.Toggle,null)),r.a.createElement(g.Navbar.Collapse,null,r.a.createElement(g.Nav,{pullRight:!0},r.a.createElement(g.NavDropdown,{title:"Users",id:"Users-Nav-Dropdown"},t.length>0?n:r.a.createElement(pe,null)))))}),he=(a(409),{CONNECTING_TO_LOBBY:"Plugging you in ...",SEARCHING_YOUTUBE_VIDEO:"Searching ...",ADD_TO_PLAYLIST:"Adding to Playlist ..."}),ge=Object(o.b)(function(e){var t=e.lobby.loadingData;return{isLoading:t.isLoading,type:t.type}})(function(e){var t=e.isLoading,a=e.type,n=t?"full-page-spinner-container":"full-page-spinner-inactive";return r.a.createElement("div",{className:n},r.a.createElement("div",{className:"full-page-spinner"}),r.a.createElement("div",{className:"full-page-spinner-label"}," ",he[a]," "))}),ye=(a(411),function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){q()}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(ge,null),r.a.createElement(fe,null),r.a.createElement(f,null),r.a.createElement("div",{className:"upper-section-container"},r.a.createElement("div",{className:"player-view-container"},r.a.createElement("span",{className:"current-playlist-section"},r.a.createElement(Ee,null)),r.a.createElement("span",{className:"youtube-player-container"},r.a.createElement(oe,null)))),r.a.createElement("div",{className:"lower-section-container"},r.a.createElement($,null)))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(o.a,{store:A},r.a.createElement(ye,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[173,2,1]]]);
//# sourceMappingURL=main.0c2a36ad.chunk.js.map